# 직장인 소모임 앱 MVP - Walkthrough

## 1. 개요
*   **목표:** 1인 개발자가 즉시 운영 가능한 "모임 중심" MVP 구축 완료.
*   **스택:** Next.js (App Router), Supabase (Auth/DB), Tailwind CSS, **OpenStreetMap(위치)**.

## 2. 사전 준비 (필수)
앱을 실행하기 전에 **Supabase 인증 설정**과 **DB 업데이트**가 필요합니다.

### A. 소셜 로그인 설정 (Supabase Dashboard)
1.  **Authentication > Providers** 메뉴로 이동.
2.  **Kakao** 또는 **Google** 프로바이드 활성화 (auth_setup_guide.md 참고).
3.  **URL Configuration > Site URL**에 `http://localhost:3000` 설정.

### B. DB 업데이트 (SQL)
1.  **위치 기능:** `migrations/add_location_columns.sql` 실행.
2.  **이메일 가입:** `migrations/add_user_trigger.sql` 실행.
    *   *설명:* 이메일로 가입하면 자동으로 `users` 테이블에 정보를 넣어주는 트리거입니다.
3.  **커뮤니티 기능:** `migrations/add_community_features.sql` 실행.
4.  **실시간 채팅:** `migrations/add_chat_features.sql` 및 `migrations/enable_realtime_chat.sql` 실행.
    *   *설명:* `chat_messages` 테이블을 Realtime 구독 대상에 추가해야 실시간 업데이트가 작동합니다.

## 3. 실행 방법
터미널에서 다음 명령어로 로컬 서버를 실행합니다.

```bash
npm run dev
```

브라우저에서 `http://localhost:3000` 접속.

## 4. 주요 기능 테스트 시나리오

### 1) 회원가입 및 로그인 (Email Auth)
1.  메인 페이지 우측 상단 **[로그인]** 버튼 클릭.
2.  하단 **[회원가입]** 링크 클릭.
3.  이메일, 비밀번호, 닉네임 입력 후 **[가입하기]**.
4.  *이메일 확인* (Supabase 설정에 따라 생략되거나 메일함을 확인해야 함).
5.  다시 로그인 페이지에서 이메일/비밀번호로 로그인 시도 -> 성공 시 메인으로 이동.

### 2) 모임 만들기 (Create & Location)
1.  **[모임 만들기]** 버튼 클릭.
2.  **장소 (주소 검색)** 섹션에서 돋보기 아이콘 클릭.
3.  주소(예: 강남역, 판교) 검색 후 선택.
4.  "✓ 위치 좌표 확인됨" 메시지가 뜨는지 확인 (자동 좌표 변환).
5.  나머지 정보 입력 후 **[모임 개설하기]** 클릭.

### 3) 내 주변 모임 찾기 (Near Me)
1.  메인 페이지 목록 상단 **[내 주변 모임 찾기]** 버튼 클릭.
2.  브라우저 위치 권한 요청 **[허용]**.
3.  내 위치와 가까운 순서대로 모임이 재정렬되는지 확인.
### 4) 프로필 관리 (Profile)
1.  우측 상단 프로필 이미지(또는 아이콘) 클릭 -> **[마이페이지]**.
2.  프로필 섹션 하단의 **[프로필 수정]** 버튼 클릭.
3.  닉네임, 회사, 직무 등 정보 입력.
4.  프로필 이미지 주소(URL) 입력 (예: `https://api.dicebear.com/7.x/avataaars/svg?seed=Felix`).
5.  **[저장하기]** 클릭 후 마이페이지에 반영되었는지 확인.

### 5) 모임 수정 (Edit Gathering)
1.  [내가 만든 모임] 탭 또는 메인에서 내가 개설한 모임 클릭.
2.  상세 페이지 타이틀 우측의 **[수정]** 버튼 클릭 (호스트만 보임).
3.  모임 정보(날짜, 내용 등) 수정 후 **[수정하기]** 클릭.
4.  상세 페이지에 수정된 내용이 반영되었는지 확인.

### 6) 실시간 채팅 (Real-time Chat)
1.  [참여한 모임] 또는 호스트로 로그인하여 모임 상세 페이지 접속.
2.  우측 하단에 생긴 **말풍선 아이콘(채팅)** 클릭.
3.  채팅방이 열리면 메시지 입력 후 전송.
4.  새로고침 없이 메시지가 바로 목록에 뜨는지 확인.


## 5. 추가 기능 (New Features)

### A. 커뮤니티 (Community)
*   **댓글:** 모임 상세 페이지에서 문의나 기대평을 남길 수 있습니다.
*   **찜하기:** 하트 버튼을 눌러 관심 모임을 저장할 수 있습니다.

### B. 모임 관리 (Management)
*   **지난 모임:** 날짜가 지난 모임은 목록에서 회색으로 표시되고 '종료됨' 배지가 붙습니다.
*   **모임 삭제:** 호스트는 자신이 만든 모임을 상세 페이지에서 삭제할 수 있습니다.
*   **모임 수정:** 호스트는 개설한 모임의 정보를 언제든지 수정할 수 있습니다.

### C. 마이페이지 (My Page)
*   **프로필:** 닉네임, 직무, 회사 등 나만의 정보를 설정하고 수정할 수 있습니다.
*   **모임 목록:** [내가 만든 모임], [참여한 모임], [찜한 모임]을 탭으로 구분하여 볼 수 있습니다.

### D. 검색 및 필터 (Search & Filter)
*   **검색:** 메인 페이지 상단에서 모임 제목이나 내용을 검색할 수 있습니다.
*   **필터:** 카테고리별로 모임을 모아보거나, '모집 중만 보기'를 통해 종료된 모임을 숨길 수 있습니다.
*   **지도 보기:** '지도보며 찾기' 버튼을 통해 지도 상에서 모임 위치를 한눈에 확인할 수 있습니다.

### E. 참여 승인 시스템 (Approval System)
*   **참여 신청:** 게스트는 참여 신청 후 호스트의 승인을 기다려야 합니다.
*   **승인/거절:** 호스트는 신청자 목록을 보고 승인하거나 거절할 수 있습니다.
*   **신청 취소:** 게스트는 승인 대기 중에 신청을 취소할 수 있습니다.

### F. 실시간 채팅 (Real-time Chat)
*   **단체 채팅:** 모임에 참여한 멤버들끼리 실시간으로 대화를 나눌 수 있습니다.
*   **접근 권한:** 호스트와 승인된(참여 확정된) 멤버만 채팅방에 입장할 수 있습니다.

## 6. 문제 해결 (Troubleshooting)
*   **이메일 가입 후 로그인이 안 된다면?**
    *   Supabase의 **Confirm Email** 설정 때문일 수 있습니다. (Authentication > Provider > Email > Confirm email "OFF"로 설정하면 바로 가입됨).
    *   **로그인 오류 페이지:** 인증 과정 중 문제가 발생하면 `/auth/auth-code-error` 페이지로 안내됩니다. 잠시 후 다시 시도해보세요.
    *   `migrations/add_user_trigger.sql`을 실행하지 않으면, 가입은 되어도 프로필이 없어서 에러가 날 수 있습니다.
*   **"내 주변 모임 찾기" 버튼이 안 보인다면?**
    *   `migrations/add_location_columns.sql` 실행 및 브라우저 위치 권한 확인 필요.
*   **회원가입/로그인 시 "Invalid input syntax for type bigint: NaN" 오류**
    *   초기 DB 스키마가 `id`를 `bigint`로 설정했으나, Supabase Auth는 `uuid`를 사용합니다.
    *   `migrations/fix_schema_types_complete.sql`을 실행하여 모든 관련 컬럼을 `uuid`로 변경해야 합니다.

## 7. 업데이트: 소셜 로그인 (Social Login)
*   **카카오 로그인:** `kakao_login_guide.md`에 설정 방법이 상세히 안내되어 있습니다.
    *   Kakao Developers & Supabase Dashboard 설정 필요.
    *   `http://localhost:3000` (플랫폼) 및 Supabase URL (Redirect URI) 등록 필수.

## 7. 다음 단계 (Next Steps)
*   [ ] **배포 (Deployment):** Vercel에 프로젝트 연결하여 실서버 배포.
*   [ ] **알림 시스템 (Notification):** 참여 승인/거절, 댓글 알림 등 실시간 알림.
